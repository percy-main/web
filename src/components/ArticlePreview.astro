---
import { RichText } from "@/components/RichText";
import { formatDate } from "date-fns";
import type { News } from "../collections/news";
import {
  IoArrowForward,
  IoNewspaper,
  IoNewspaperOutline,
} from "react-icons/io5";

type Props = News & { id: string };

const { id, title, when, summary, author } = Astro.props;
---

<article
  class="p-6 bg-white rounded-lg border border-gray-200 shadow-md dark:bg-gray-800 dark:border-gray-700"
>
  <div class="flex justify-between items-center mb-5 text-gray-500">
    <span
      class="bg-primary-100 text-primary-800 text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded dark:bg-primary-200 dark:text-primary-800"
    >
      <IoNewspaperOutline size={24} className="mr-4" />
      News
    </span>
    <span class="text-sm">{formatDate(when, "PPPP")}</span>
  </div>
  <h2
    class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
  >
    <a href={`/news/article/${id}`}>{title}</a>
  </h2>
  <p class="mb-5 font-light text-gray-500 dark:text-gray-400">
    <RichText page="" document={summary} />
  </p>
  <div class="flex flex-col md:flex-row gap-4 justify-between items-center">
    <a class="flex items-center space-x-4" href={`/person/${author.slug}`}>
      {
        author.photo && (
          <img
            class="w-7 h-7 rounded-full"
            src={author.photo.url}
            alt={author.photo?.title}
          />
        )
      }
      <span class="font-medium dark:text-white">
        {author.name}
      </span>
    </a>
    <a
      href={`/news/article/${id}`}
      class="inline-flex items-center font-medium text-primary-600 dark:text-primary-500 hover:underline"
      >Read the full article
      <IoArrowForward size={24} className="ml-2" />
    </a>
  </div>
</article>
