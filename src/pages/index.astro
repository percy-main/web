---
import { getCollection } from "astro:content";
import Base from "../layouts/Base.astro";
import { RichText } from "../components/RichText";

const news = await getCollection("news");

const top5 = news.slice(0, 5);
---

<Base title="Home">
  <h3>Latest News</h3>
  <ul>
    {
      top5.map((article) => (
        <li class="bg-white rounded-lg shadow-md border p-4 m-2">
          <div class="flex items-center mb-4">
            <div>
              <h2 class="text-lg font-semibold">{article.data.title}</h2>
              <p class="text-gray-500 text-sm">{article.data.when}</p>
            </div>
          </div>
          <p class="text-gray-700 mb-4">
            <RichText document={article.data.summary} />
          </p>
          <div class="flex justify-end">
            <a href={`/news/${article.id}`} class="text-blue-500 font-semibold">
              Read More
            </a>
          </div>
        </li>
      ))
    }
  </ul>
</Base>
